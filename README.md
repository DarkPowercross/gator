# Gator üêä

Gator is a command-line RSS reader written in Go.  
It lets you subscribe to feeds, fetch posts, and view them in a simple terminal interface.

---

## ‚ú® Features

- Manage users  
- Add and list RSS feeds  
- Follow and unfollow feeds  
- Continuously fetch posts (oldest or never-fetched feeds first)  
- Store everything in PostgreSQL  
- Safe migrations using [Goose](https://github.com/pressly/goose)  
- Strongly-typed queries generated by [sqlc](https://sqlc.dev)  

---

## üöÄ Getting Started

### Requirements
- Go 1.22+  
- PostgreSQL  
- [Goose](https://github.com/pressly/goose)  
- [sqlc](https://sqlc.dev) (only if you change queries)

### Setup

1. **Clone the repo**
   ```bash
   git clone https://github.com/DarkPowercross/gator.git
   cd gator
   ```

2. **Set up PostgreSQL**

      **macOS with brew**

      ```bash
      brew install postgresql@15
      ```

      **Linux / WSL (Debian):**

      ```bash
      sudo apt update
      sudo apt install postgresql postgresql-contrib
      ```

      ** Update PostgreSQL password (Linux Only) **
      ```bash
      sudo passwd postgres
      ```

      enter a password, dont forget it as you will need it later

      **Connect to PSQL**
      Enter the psql shell:

      ```bash
      Mac: psql postgres
      Linux: sudo -u postgres psql
      ```

      **Create the database**
      Your shell should look like this:
      ```bash
      postgres=#
      ```

      run the below command to create the psql database:

      ```bash
      CREATE DATABASE gator;
      ```

      enter the newly created database using this:
      ```bash
      \c gator
      ```

      your terminal should look like this:

      ```bash
      gator=#
      ```

      Set the user password(Linux Only)
      ```bash
      ALTER USER postgres PASSWORD 'postgres';
      ```


3. Migrate the database

   **Make sure goose is installed**
   ```bash
   go install github.com/pressly/goose/v3/cmd/goose@latest
   ```

   **Get your connection string, format it like this:
   ```bash
   protocol://username:password@host:port/database
   ```

   for example:
   macOS (no password, your username): postgres://Darkpowercross:@localhost:5432/gator
   Linux (password that we set): postgres://postgres:postgres@localhost:5432/gator

   you can test that it works using psql
   ```bash
   psql postgres://Darkpowercross:@localhost:5432/gator
   ```

   **update the database schema**
   ```
   cd sql/schema
   goose postgres <connection_string> up
   ```

**4.ensure all queries are up to date**
   ensure sqlc is installed:
   ```bash
   go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest
   ```
   
   From the root of the folder run the below command:

   ```bash
   sqlc generate
   ```

**5. Create config file**
   Create the JSON file in your home directory called .gatorconfig.json:
   ```bash
   touch ~/.gatorconfig.json
   nano ~/.gatorconfig.json
   ```

   add the followign structure:
   ```bash
   
  "db_url": "DB_URL created earlier",
  "current_user_name": "Dont set this, the program will do this for us"
   ```

   Dont worry about setting the user for now as we will do that when we run the application

**6. Install the gator application**

   Now that we have done the initial setup lets install the gator application.

   From the root of the folder run the below:

   ```bash
   go install
   ```

   Then you should be ready to use the application.


### Usage

   1. **Add a user**
      ```bash
      gator register "Your Name"
      ```
   2. **Login**
      ```bash
      gator login "Your Name"
      ```
   3. **Add a feed**
      ```bash
      gator addfeed "https://example.com/rss"
      ```
   4. **List feeds**
      ```bash
      gator feeds
      ```
   5. **Follow a feed**
      ```bash
      gator follow URL
      ```
   6. **Fetch posts**
      ```bash
      gator agg <"time frame, i.e 15s, 1m, 1h, 1d">
      ```
   7. **View posts**
      ```bash
      gator Browse
      ```